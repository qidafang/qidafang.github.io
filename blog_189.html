<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>思而勤工作室</title>
	<link rel="stylesheet" href="blog.css">
</head>
<body>
<div id="container">
<a href="index.html">回目录</a>
<h1>存草稿</h1>
<div><p>存草稿的本质是，<strong>保存页面的状态</strong>。<br />
所以存json是理所当然的，页面好生成，也容易将草稿反向渲染回页面。<br />
存储几乎忍不住要用nosql数据库了，还是存到了关系型数据库里，用了个大列。</p>

<p>页面，草稿，实体，如果两两可转换，就多达六条线，简化成页面只和草稿交互，实体也只和草稿交互，就减少了三分之一的工作量。<br />
填充页面表单，一律以json为源来填充，如果其实是实体的数据，也先将其转为json，草稿当然本来就是json。<br />
保存数据库，页面因为不许直接保存，只能存草稿，如果要真的保存，再根据草稿生成实体，再存储。</p>

<p>问题是如果草稿不需要完整校验，而实体需要完整校验，怎么办？<br />
也容易，把完整校验前置到页面上，当想真正保存的时候，检查一下页面的状态，如果不完整，就不做从草稿到实体的事，而去要求完善页面信息。</p>
</div>
</div>
</body>
</html>