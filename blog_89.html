<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>思而勤工作室</title>
	<link rel="stylesheet" href="blog.css">
</head>
<body>
<div id="container">
<a href="index.html">回目录</a>
<h1>activiti订正</h1>
<div><p>上篇关于工作流的博客太幼稚了，惭愧。</p>

<p>原来工作流的核心价值，在解决【开发完成后新定义的业务流程】的可能性。</p>

<p>【引擎】的意义在，你输入图纸，它使之变成【可运转的流程】。所以工作流叫引擎。</p>

<p>因为【业务逻辑】是编程时未知的，必须留出扩展点，扩展点就是【工作流设计图】。</p>

<p>【工作流设计图】和【领域逻辑】的连接点，在【工作流设计图】的【任务节点】中可以定义【执行脚本】，其中可以访问到【领域逻辑服务】的bean。</p>

<p>所以【领域逻辑】相关的编程工作做好，即【数据库】【实体类】【持久层】【领域逻辑业务层】编写好后，让【领域逻辑业务层】等待被【工作流设计图】调用即可。</p>

<p>以上是【行为】的解决方案，另外还有【状态】，即不同工作流中涉及的业务状态不同，这些东西在【上下文】容器中统一容纳，这个【上下文】，程序可以访问，【设计图】也可以访问，本质是个map，【弱类型】的特点即想放多少键值对都可以，每个【上下文】属于一个【流程】，从开始到结束，穿过各个任务节点，让整个流程的运转仿佛置身于一个稳定的环境之中。</p>

<p>还有【交互】，因为每个任务完成时，需要用户输入的信息是不同的，这就是【动态表单】的用武之地，可以在【设计图】中为每个【任务】定义一个【动态表单】，显示完成任务表单时将【动态表单】的各个表单项渲染输出，提交任务的处理方法再通过前缀搜集用户为表单项输入的值。</p>

<p>灵活的另一面就是IDE支持弱，实际使用中表单都有哪些内容，程序员编程的时候是不可能知道的，只能设计成通用的方法，使用map传递数据，这在java这个强类型语言里，总感到轻柔潇洒，像一股清新的风，什么时候用类和对象，什么时候用容器，这是java编程的一大乐趣所在。</p>

<p>&nbsp;</p>

<p>总结：</p>

<p>灵活的点：【流程】【表单】【策略】</p>

<p>固定的点：【流定义/流/任务的列表及表单页】【领域逻辑的服务/DAO/DB】</p>

<p>调用顺序：表现逻辑（固定）-&gt;工作流逻辑（灵活）-&gt;领域逻辑（固定），说工作流是框架呢，它最终还是被人调的，说它不是框架呢，它确实掌握了部分控制流，强为之名【中层框架】好了。</p>

<p>扩展办法：因为它【不上不下】【满身槽（接口）点】，所以对其扩展就&ldquo;运用之妙，存乎一心&rdquo;了，我对【使用自己的用户和组】的实现是自己写DAO直接访问DB，绕开某些API，网上的思路则是重写其API的实现类插进去，设计良好的东西用着就是让人觉得爽快，问题在驾驭者水平不够容易失控。</p>

<p>&nbsp;</p>
</div>
</div>
</body>
</html>