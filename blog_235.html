<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>思而勤工作室</title>
	<link rel="stylesheet" href="blog.css">
</head>
<body>
<div id="container">
<a href="index.html">回目录</a>
<h1>java web程序员自学android开发</h1>
<div><p>从8月24日到今天，10几天不到半个月的时间里，个人的任务是自学android开发。<br />
这期间跟同学玩儿国学测试占了一点时间，跟同学玩儿dota占了大量时间（可能有上百盘），自己读战国历史占用了部分时间。<br />
好在自认为有一点儿对学习方法的心得，所以在不算长的时间里，还算获得了自信。</p>

<p>主要参考了三本书：《疯狂android讲义》《android开发精要》和《第一行代码》，这三本书我把它们分别看作大而全的入门书、清晰简洁的脉络书、优美先进的最佳实践书。<br />
个人看来，后两本书领先第一本书至少一个身位，体现在要言不烦和详略得当上，其中第二本侧重将脉络梳理清晰，第三本侧重将最佳实践娓娓道来。<br />
但第一本书的基石作用也很重要，它将android最基础的技术不厌其烦地罗列出来，是一本很好得入门书，有了它做铺垫，读后两本才会如鱼得水。</p>

<p>以下是学习心得：<br />
0.<br />
android开发使用语言是java，成果是apk安装包，拷贝到安卓设备中安装即可使用。<br />
1.<br />
整体结构：<br />
设备-1--n-组件（组件分为活动、服务、内容提供者、广播接收器四类）<br />
我特意隐去了&ldquo;应用&rdquo;这个节点，因为它并不重要，可以想象在安卓系统上直接注册了多个组件，它们之间并没有应用这一层。一个组件与另一个本应用中的组件通信，还是与另一个其他应用中的组件通信，并没有任何区别，应用界限是透明的。<br />
这体现出一种松散灵活自由装配的特征，它使得一个设备中的活动协作方式存在无限可能。就像在web的世界，通过超链接从一个网站跳转到另一个网站非常轻松一样。<br />
设备-1--n-任务-1--1-活动栈-1--n-活动-1--1-窗口-1--1-控件树-1--n-控件<br />
活动的相互调用通过任务进行组织，每个活动都有其生命周期：<br />
onCreate-onStart-onResume-onPause-onStop-onDestory<br />
其中onPause、onStop、onDestory分别在部分可见、完全不可见、被结束时触发，它们的反操作分别是onResume、onStart和onCreate，如果要保持操作状态则在适当的时候（前三个方法之一）保存状态、在适当的时候（对应的后三个方法之一）恢复状态。<br />
2.<br />
界面：<br />
活动中的界面是一个控件树，就像网页中的dom一样。<br />
html是方便程序员定义树结构用的，实际上浏览器中的控件树是对象树。与此相同的，安卓程序中的界面xml也仅仅是用于方便程序员定义树结构用的，在程序中实际是对象树。如果你愿意，完全可以不使用xml，纯粹用编程的方式组织这棵树，就好像完全采用javascript来生成网页中全部节点一样，但谁愿意这么做呢？（除了extjs）<br />
事件：<br />
与html的事件一样，安卓的界面事件也是在控件树的节点上添加触发事件实现的。<br />
因为在java中函数不是一等对象，写回调函数要用稍微复杂一点的匿名内部类，这个类的全部价值就是提供一个回调方法。<br />
如果要进行一些耗时的操作，则要新开一个线程进行，否则超过几秒就会报警告。这个线程执行完任务之后如果要更新界面，在线程方法里更新会报错，必须在主线程里定义一个handler，在任务线程里调用handler来更新界面。<br />
状态：<br />
与one page one application的web应用程序一样，可以在界面定义的地方用实例变量来保持程序运行状态（反例：页面跳转的web应用，一跳javascript上下文就切了）。<br />
因为安卓组件都是由系统来托管生命周期的，在后台的界面可能不一定什么时候就被回收了。所以要用活动生命周期中的方法来适时保存状态。<br />
3.<br />
数据存储：<br />
作为一个客户端程序，比起web来说保存数据到本地更天经地义（当然html5也有方法保存了）。<br />
保存到文件：<br />
最基本的实现，保存一些文本什么的很方便，而且保存的地方是程序私有的空间，很安全。<br />
保存到配置文件：<br />
保存一些key-value键值对的数据很方便。（类比：html5的localStorage）<br />
保存到关系型数据库：<br />
非常强大的功能，将数据保存到本地的数据库中，安卓直接提供了支持，非常好用。（类比：html5的本地数据库）<br />
知道有这几个保存的可能性就可以了，根据具体的情况采用适当的方式。<br />
4.<br />
网络连接：<br />
作为一个C/S程序（客户端程序+与服务器的连接），拥有与服务器的连接能力也是当然的。<br />
连接方式当然是rest接口的web service，服务器端的实现已经太熟悉了。<br />
安卓客户端这边，自带了连接http的client的api和json解析的api，所以用起来非常方便。<br />
5.<br />
没了。<br />
与上篇博客相比，似乎并没有什么进步，然而最大的收获知道了安卓程序的边界，有了&ldquo;不过尔尔，只剩一点细节&rdquo;的安心。<br />
这种安心是非常关键的，初学东西，既怕没看清全局脉络就匆匆纠结细节，又怕始终不知道这项技术外延边界，长期处于敬畏惶恐的心态。<br />
当把脉络摸清了，来具体着手一些实际的操作，是明天开始的任务。<br />
当然，因为全局视野已经有了，哪些先扔一边，哪些要重点熟悉，取舍的主动权就可以行使了。任何事情，最重要的是主动权。<br />
<strong>读书也是，《如何阅读一本书》介绍的&ldquo;主题阅读&rdquo;很关键，要学会同时从多本书中阅读一个主题，虽然应该保持学术上的谦卑和对作者的尊重，但是读书时自己必须是主人，而书籍由你来调动。<br />
宁输数子，勿失一先。</strong><br />
6.<br />
那么明天开始的任务：<br />
想个主题做个app，包含客户端和服务器的程序，把关键的知识点（常用控件、本地存储、网络传输）都用上，而且不是helloworld级别的水平，水平要到可以给客户看来证明自己有android开发能力的程度。<br />
时间，一星期，即这个周末之前。<br />
收工，准备dota。</p>
</div>
</div>
</body>
</html>